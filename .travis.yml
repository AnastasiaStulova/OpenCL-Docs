dist: xenial

language: ruby

git:
  depth: 200

rvm:
  - 2.3.3

before_install:
  - sudo apt-get install -y libpango1.0-dev ghostscript fonts-lyx
  - gem install asciidoctor -v 1.5.8
  - gem install coderay -v 1.1.1
  - gem install ttfunk -v 1.5.1
  - gem install asciidoctor-pdf -v 1.5.0
  - MATHEMATICAL_SKIP_STRDUP=1 gem install asciidoctor-mathematical -v 0.2.2

script:
  - git describe --tags --dirty
  - make api c env ext cxx4opencl

deploy:
  provider: releases
  file_glob: true
  file:
    - out/pdf/*
    - out/html/*
  skip_cleanup: true
  on:
    tags: true
  api_key:
    secure: xOeOOpb0cMSGPL+vAcmI8oqFvmNLH7NJg0tUlGpYXmP31qZ+EVNgWhBE3quiWo96SoOLL1oNoC4zZJ5NE+2udNrooNvDeQkTkcGJZtrPl1WlzIzyq6i6EYYD9eChSGfOOX3iQHzr/UdxeSr9ZoDZI8tgr9lhU9tLhSErR/3rAkV//se3nch9YHedIx7WvNSQqVbtjcRYgVx9X+I6NKc1YssWPKYCGzhKGnAeEiuLr4OOio/4FCtl9vMsO/N4KcA0UwsdJ4gWBCJLmO9vZsWlHMiu63mNOZinhiY5MrNx/1r0fH+4lQ+KhEUpux7aSOZURMaZL3ANchvkYSkiFFxVv7p1EOosC5V+MqUYRwlwFv/+W1wOQbUGlt2rDoPj5Li81EP//cVVvh8NoONtOSkwk8bymD6UTvSg5cz15aBGBnzLETvMlEs1cw9Z8sJKGuwnj0YWjHRImBmwDOfwaHsXMBkariMD6FN/f6EKoVbqNCks+YqPqhSfXemHq9vrKKP90zFIsBM+tFRPO36j5/Jx/I/QIzOjbE3CYJ0gzvAZwefGY9yXcM4s4w+HNARqI5z+xHMRdcMWHkLy57+qLQkinyfWLDnk5GdQATMyeRAz21vkB/7ACoHUAWT3HYFScQVxi09bFV6WwLZwDCMbVyvQ45BhI2aPNoZhjmTQAFAq3og=
